<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Sign up form</title>
    <style>
      .invalid {
        border: 2px dashed red;
      }
      .valid {
        border: 2px solid green;
      }
    </style>
  </head>
  <body>
    <div id="sign-up-form">
      <form id="signUpForm">
        <label for="firstName">First Name</label><br />
        <input required type="text" id="firstName" /><br />
        <label for="lastName">Last Name</label>
        <br />
        <input required type="text" id="lastName" />
        <br />
        <label for="email">Email</label>
        <br />
        <input required type="email" id="email" />
        <br />
        <label for="password">Password</label>
        <br />
        <input required type="password" id="password" />
        <br />
        <label for="passwordConfirmation">Password Confirmation</label>
        <br />
        <input required type="password" id="passwordConfirmation" />
        <br />
        <input required id="submit" type="submit" value="Submit" />
      </form>
      <h2 id="thankMessage" hidden>Thank you for submitting the form.</h2>
    </div>
    <script>
      /*** Grab Elements ***/
      const signUpForm = document.getElementById("signUpForm");
      const firstNameEl = document.getElementById("firstName");
      const lastNameEl = document.getElementById("lastName");
      const emailEl = document.getElementById("email");
      const passwordEl = document.getElementById("password");
      const passwordConfirmationEl = document.getElementById(
        "passwordConfirmation"
      );

      /*** Apply Event Handlers ***/
      firstNameEl.onchange = handleFirstNameInput;
      lastNameEl.onchange = handlelastNameInput;
      emailEl.onchange = handleEmailInput;
      emailEl.oninvalid = handleInvalid;
      passwordEl.onchange = handlePasswordInput;
      passwordConfirmationEl.onchange = handlePasswordConfirmationInput;
      signUpForm.onsubmit = handleFormSubmit;

      /*** Event Callbacks ***/
      function handleFirstNameInput(event) {
        firstNameEl.classList.add("valid");
      }

      function handlelastNameInput(event) {
        lastNameEl.classList.add("valid");
      }

      function handleEmailInput(event) {
        const emailString = event.target.value;
        const emailRegex = new RegExp(
          "^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$"
        );
        if (emailRegex.test(emailString)) {
          emailEl.classList.add("valid");
        } else {
          emailEl.classList.add("invalid");
        }
      }

      function handlePasswordInput(event) {
        passwordEl.classList.add("valid");
      }

      function handlePasswordConfirmationInput(event) {
        passwordConfirmationEl.classList.add("valid");
      }

      function handleFormSubmit(event) {
        event.preventDefault();
        document.getElementById("thankMessage").removeAttribute("hidden");
      }
    </script>
  </body>
</html>
